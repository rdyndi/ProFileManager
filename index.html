<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ProFile Manager</title>

    <!-- TAILWIND -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FONT -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- TAILWIND THEME -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              primary: {
                50: '#eff6ff',
                100: '#dbeafe',
                500: '#3b82f6',
                600: '#2563eb',
                700: '#1d4ed8',
                800: '#1e40af',
                900: '#1e3a8a',
              }
            }
          },
        },
      };
    </script>

    <!-- IMPORT MAP -->
    <script type="importmap">
      {
        "imports": {
          "react": "https://aistudiocdn.com/react@^19.2.0",
          "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
          "firebase/app": "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js",
          "firebase/firestore": "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"
        }
      }
    </script>
  </head>

  <body class="bg-slate-50 text-slate-900 antialiased">
    <div id="root"></div>

    <!-- APP -->
    <script type="module">
      import React from "react";
      import { createRoot } from "react-dom/client";
      import { initializeApp } from "firebase/app";
      import {
        getFirestore,
        collection,
        addDoc,
        getDocs,
        serverTimestamp
      } from "firebase/firestore";

      // ðŸ”¥ CONFIG FIREBASE KAMU â€” SUDAH DIMASUKKAN
      const firebaseConfig = {
        apiKey: "AIzaSyClChxcL4T1Rc3b8l6Zobbj6ynAQLWPGwY",
        authDomain: "dompetpintar-d50e0.firebaseapp.com",
        projectId: "dompetpintar-d50e0",
        storageBucket: "dompetpintar-d50e0.firebasestorage.app",
        messagingSenderId: "804793025772",
        appId: "1:804793025772:web:eb3ecc3f4edd030b86d1c9",
        measurementId: "G-3BV80BW6ZN"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      function App() {
        const [clients, setClients] = React.useState([]);
        const [loading, setLoading] = React.useState(true);
        const [saving, setSaving] = React.useState(false);

        const [nama, setNama] = React.useState("");
        const [tipe, setTipe] = React.useState("PT");
        const [kontak, setKontak] = React.useState("");
        const [error, setError] = React.useState("");

        async function loadData() {
          setLoading(true);
          try {
            const snap = await getDocs(collection(db, "clients"));
            let data = [];
            snap.forEach(doc => data.push({ id: doc.id, ...doc.data() }));
            setClients(data);
          } catch (err) {
            setError("Gagal ambil data.");
          }
          setLoading(false);
        }

        React.useEffect(() => {
          loadData();
        }, []);

        async function saveClient(e) {
          e.preventDefault();
          if (!nama.trim()) {
            setError("Nama wajib diisi.");
            return;
          }

          setSaving(true);
          try {
            await addDoc(collection(db, "clients"), {
              nama,
              tipe,
              kontak,
              createdAt: serverTimestamp()
            });

            setNama("");
            setKontak("");
            loadData();

          } catch (err) {
            setError("Gagal simpan.");
          }
          setSaving(false);
        }

        return React.createElement(
          "div",
          { className: "min-h-screen p-6 flex flex-col items-center" },

          React.createElement("h1", { className: "text-3xl font-bold text-primary-700 mb-4" }, "ProFile Manager"),

          error ? React.createElement("div", { className: "text-red-600 mb-3" }, error) : null,

          // FORM
          React.createElement(
            "form",
            { className: "bg-white border rounded-xl p-5 w-full max-w-xl shadow mb-6", onSubmit: saveClient },

            React.createElement("label", { className: "block text-sm font-medium" }, "Nama Klien"),
            React.createElement("input", {
              className: "w-full border rounded p-2 text-sm mb-3",
              value: nama,
              onChange: e => setNama(e.target.value),
              placeholder: "Contoh: PT Sinar Abadi"
            }),

            React.createElement("label", { className: "block text-sm font-medium" }, "Tipe Klien"),
            React.createElement(
              "select",
              {
                className: "w-full border rounded p-2 text-sm mb-3",
                value: tipe,
                onChange: e => setTipe(e.target.value)
              },
              React.createElement("option", { value: "PT" }, "PT"),
              React.createElement("option", { value: "CV" }, "CV"),
              React.createElement("option", { value: "Perorangan" }, "Perorangan")
            ),

            React.createElement("label", { className: "block text-sm font-medium" }, "Kontak (opsional)"),
            React.createElement("input", {
              className: "w-full border rounded p-2 text-sm mb-4",
              value: kontak,
              onChange: e => setKontak(e.target.value),
              placeholder: "No HP / email"
            }),

            React.createElement(
              "button",
              {
                type: "submit",
                className:
                  "w-full bg-primary-600 text-white rounded p-2 text-sm font-medium hover:bg-primary-700",
                disabled: saving
              },
              saving ? "Menyimpan..." : "Simpan Klien"
            )
          ),

          // LIST
          React.createElement(
            "div",
            { className: "w-full max-w-xl bg-white rounded-xl border shadow p-5" },

            React.createElement("h2", { className: "text-lg font-semibold mb-3" }, "Daftar Klien"),

            loading
              ? React.createElement("p", null, "Memuat data...")
              : clients.length === 0
              ? React.createElement("p", null, "Belum ada klien.")
              : React.createElement(
                  "ul",
                  { className: "space-y-3" },
                  clients.map(c =>
                    React.createElement(
                      "li",
                      { key: c.id, className: "border rounded p-3 text-sm" },
                      React.createElement("div", { className: "font-semibold" }, c.nama),
                      React.createElement("div", { className: "text-xs text-slate-500" }, c.tipe),
                      c.kontak
                        ? React.createElement("div", { className: "text-xs text-slate-400" }, c.kontak)
                        : null
                    )
                  )
                )
          )
        );
      }

      createRoot(document.getElementById("root")).render(React.createElement(App));
    </script>
  </body>
</html>
