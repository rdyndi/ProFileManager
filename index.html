<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ProFile Manager</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
            colors: {
              primary: {
                50: "#eff6ff",
                100: "#dbeafe",
                500: "#3b82f6",
                600: "#2563eb",
                700: "#1d4ed8",
                800: "#1e40af",
                900: "#1e3a8a",
              },
            },
          },
        },
      };
    </script>

    <style>
      @media print {
        .no-print {
          display: none !important;
        }
        .print-only {
          display: block !important;
        }
        body {
          background: white;
        }
        @page {
          margin: 16mm;
        }
      }
      .print-only {
        display: none;
      }
    </style>

    <!-- Import map asli kamu -->
    <script type="importmap">
      {
        "imports": {
          "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
          "react/": "https://aistudiocdn.com/react@^19.2.0/",
          "react": "https://aistudiocdn.com/react@^19.2.0",
          "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
          "firebase/app": "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js",
          "firebase/firestore": "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js",
          "firebase/": "https://aistudiocdn.com/firebase@^12.6.0/"
        }
      }
    </script>
  </head>

  <body class="bg-slate-50 text-slate-900 antialiased">
    <div id="root"></div>

    <script type="module">
      import React from "react";
      import { createRoot } from "react-dom/client";
      import { initializeApp } from "firebase/app";
      import {
        getFirestore,
        collection,
        addDoc,
        getDocs,
        updateDoc,
        deleteDoc,
        doc,
        serverTimestamp,
        query,
        orderBy
      } from "firebase/firestore";

      // CONFIG FIREBASE KAMU
      const firebaseConfig = {
        apiKey: "AIzaSyClChxcL4T1Rc3b8l6Zobbj6ynAQLWPGwY",
        authDomain: "dompetpintar-d50e0.firebaseapp.com",
        projectId: "dompetpintar-d50e0",
        storageBucket: "dompetpintar-d50e0.firebasestorage.app",
        messagingSenderId: "804793025772",
        appId: "1:804793025772:web:eb3ecc3f4edd030b86d1c9",
        measurementId: "G-3BV80BW6ZN"
      };

      let db = null;
      let firebaseInitError = null;
      try {
        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
      } catch (e) {
        console.error("Firebase init error:", e);
        firebaseInitError = e;
      }

      function App() {
        const [activePage, setActivePage] = React.useState("dashboard");

        const [clients, setClients] = React.useState([]);
        const [loadingClients, setLoadingClients] = React.useState(true);
        const [errorGlobal, setErrorGlobal] = React.useState(
          firebaseInitError
            ? "Gagal inisialisasi Firebase: " +
                (firebaseInitError.code || firebaseInitError.message || "")
            : ""
        );

        // Data Klien
        const [nama, setNama] = React.useState("");
        const [tipe, setTipe] = React.useState("PT");
        const [kontak, setKontak] = React.useState("");
        const [catatan, setCatatan] = React.useState("");
        const [editingClientId, setEditingClientId] = React.useState(null);
        const [savingClient, setSavingClient] = React.useState(false);
        const [deletingClientId, setDeletingClientId] = React.useState(null);
        const [filterClient, setFilterClient] = React.useState("");

        // Tanda Terima
        const [receipts, setReceipts] = React.useState([]);
        const [loadingReceipts, setLoadingReceipts] = React.useState(true);
        const [receiptId, setReceiptId] = React.useState(null);
        const [receiptClientId, setReceiptClientId] = React.useState("");
        const [receiptTitle, setReceiptTitle] = React.useState("");
        const [receiptNote, setReceiptNote] = React.useState("");
        const [savingReceipt, setSavingReceipt] = React.useState(false);
        const [deletingReceiptId, setDeletingReceiptId] = React.useState(null);

        // Surat Jalan
        const [deliveries, setDeliveries] = React.useState([]);
        const [loadingDeliveries, setLoadingDeliveries] = React.useState(true);
        const [deliveryId, setDeliveryId] = React.useState(null);
        const [deliveryClientId, setDeliveryClientId] = React.useState("");
        const [deliveryTitle, setDeliveryTitle] = React.useState("");
        const [deliveryNote, setDeliveryNote] = React.useState("");
        const [savingDelivery, setSavingDelivery] = React.useState(false);
        const [deletingDeliveryId, setDeletingDeliveryId] = React.useState(null);

        // Print
        const [printType, setPrintType] = React.useState(null); // "tanda" | "surat" | null
        const [printDoc, setPrintDoc] = React.useState(null);

        const todayStr = new Date().toLocaleDateString("id-ID", {
          day: "2-digit",
          month: "long",
          year: "numeric"
        });

        // LOAD DATA
        async function loadClients() {
          if (!db) {
            setLoadingClients(false);
            return;
          }
          setLoadingClients(true);
          try {
            const col = collection(db, "clients");
            const qCol = query(col, orderBy("createdAt", "desc"));
            const snap = await getDocs(qCol);
            const arr = [];
            snap.forEach((d) => arr.push({ id: d.id, ...d.data() }));
            setClients(arr);
          } catch (e) {
            console.error("loadClients error:", e);
            setErrorGlobal(
              "Gagal ambil data klien: " +
                (e.code || e.message || "cek Firestore rules.")
            );
          }
          setLoadingClients(false);
        }

        async function loadReceipts() {
          if (!db) {
            setLoadingReceipts(false);
            return;
          }
          setLoadingReceipts(true);
          try {
            const col = collection(db, "tanda_terima");
            const qCol = query(col, orderBy("createdAt", "desc"));
            const snap = await getDocs(qCol);
            const arr = [];
            snap.forEach((d) => arr.push({ id: d.id, ...d.data() }));
            setReceipts(arr);
          } catch (e) {
            console.error("loadReceipts error:", e);
          }
          setLoadingReceipts(false);
        }

        async function loadDeliveries() {
          if (!db) {
            setLoadingDeliveries(false);
            return;
          }
          setLoadingDeliveries(true);
          try {
            const col = collection(db, "surat_jalan");
            const qCol = query(col, orderBy("createdAt", "desc"));
            const snap = await getDocs(qCol);
            const arr = [];
            snap.forEach((d) => arr.push({ id: d.id, ...d.data() }));
            setDeliveries(arr);
          } catch (e) {
            console.error("loadDeliveries error:", e);
          }
          setLoadingDeliveries(false);
        }

        React.useEffect(() => {
          loadClients();
          loadReceipts();
          loadDeliveries();
        }, []);

        // ===== DATA KLIEN HANDLER =====
        function resetClientForm() {
          setNama("");
          setTipe("PT");
          setKontak("");
          setCatatan("");
          setEditingClientId(null);
        }

        async function handleClientSubmit(e) {
          e.preventDefault();
          if (!db) return;
          if (!nama.trim()) {
            setErrorGlobal("Nama klien wajib diisi.");
            return;
          }
          setErrorGlobal("");
          setSavingClient(true);
          try {
            if (editingClientId) {
              const ref = doc(db, "clients", editingClientId);
              await updateDoc(ref, {
                nama,
                tipe,
                kontak,
                catatan
              });
            } else {
              const col = collection(db, "clients");
              await addDoc(col, {
                nama,
                tipe,
                kontak,
                catatan,
                createdAt: serverTimestamp()
              });
            }
            resetClientForm();
            await loadClients();
          } catch (e) {
            console.error("save client error:", e);
            setErrorGlobal(
              "Gagal menyimpan data klien: " +
                (e.code || e.message || "")
            );
          }
          setSavingClient(false);
        }

        function handleClientEdit(c) {
          setEditingClientId(c.id);
          setNama(c.nama || "");
          setTipe(c.tipe || "PT");
          setKontak(c.kontak || "");
          setCatatan(c.catatan || "");
          setActivePage("clients");
        }

        async function handleClientDelete(id) {
          if (!db) return;
          const yakin = confirm("Yakin hapus klien ini?");
          if (!yakin) return;
          setDeletingClientId(id);
          try {
            const ref = doc(db, "clients", id);
            await deleteDoc(ref);
            await loadClients();
          } catch (e) {
            console.error("delete client error:", e);
            setErrorGlobal(
              "Gagal menghapus klien: " + (e.code || e.message || "")
            );
          }
          setDeletingClientId(null);
        }

        // ===== TANDA TERIMA =====
        function resetReceiptForm() {
          setReceiptId(null);
          setReceiptClientId("");
          setReceiptTitle("");
          setReceiptNote("");
        }

        async function handleReceiptSubmit(e) {
          e.preventDefault();
          if (!db) return;
          if (!receiptClientId || !receiptTitle.trim()) {
            setErrorGlobal(
              "Klien dan judul/uraian tanda terima wajib diisi."
            );
            return;
          }
          setSavingReceipt(true);
          try {
            const client = clients.find((c) => c.id === receiptClientId) || {};
            if (receiptId) {
              const ref = doc(db, "tanda_terima", receiptId);
              await updateDoc(ref, {
                clientId: receiptClientId,
                clientName: client.nama || "",
                title: receiptTitle,
                note: receiptNote
              });
            } else {
              const col = collection(db, "tanda_terima");
              await addDoc(col, {
                clientId: receiptClientId,
                clientName: client.nama || "",
                title: receiptTitle,
                note: receiptNote,
                createdAt: serverTimestamp()
              });
            }
            resetReceiptForm();
            await loadReceipts();
          } catch (e) {
            console.error("save receipt error:", e);
            setErrorGlobal(
              "Gagal menyimpan tanda terima: " +
                (e.code || e.message || "")
            );
          }
          setSavingReceipt(false);
        }

        function handleReceiptEdit(r) {
          setReceiptId(r.id);
          setReceiptClientId(r.clientId || "");
          setReceiptTitle(r.title || "");
          setReceiptNote(r.note || "");
        }

        async function handleReceiptDelete(id) {
          if (!db) return;
          const yakin = confirm("Yakin hapus tanda terima ini?");
          if (!yakin) return;
          setDeletingReceiptId(id);
          try {
            const ref = doc(db, "tanda_terima", id);
            await deleteDoc(ref);
            await loadReceipts();
          } catch (e) {
            console.error("delete receipt error:", e);
            setErrorGlobal(
              "Gagal menghapus tanda terima: " +
                (e.code || e.message || "")
            );
          }
          setDeletingReceiptId(null);
        }

        // ===== SURAT JALAN =====
        function resetDeliveryForm() {
          setDeliveryId(null);
          setDeliveryClientId("");
          setDeliveryTitle("");
          setDeliveryNote("");
        }

        async function handleDeliverySubmit(e) {
          e.preventDefault();
          if (!db) return;
          if (!deliveryClientId || !deliveryTitle.trim()) {
            setErrorGlobal(
              "Klien dan judul/uraian surat jalan wajib diisi."
            );
            return;
          }
          setSavingDelivery(true);
          try {
            const client = clients.find((c) => c.id === deliveryClientId) || {};
            if (deliveryId) {
              const ref = doc(db, "surat_jalan", deliveryId);
              await updateDoc(ref, {
                clientId: deliveryClientId,
                clientName: client.nama || "",
                title: deliveryTitle,
                note: deliveryNote
              });
            } else {
              const col = collection(db, "surat_jalan");
              await addDoc(col, {
                clientId: deliveryClientId,
                clientName: client.nama || "",
                title: deliveryTitle,
                note: deliveryNote,
                createdAt: serverTimestamp()
              });
            }
            resetDeliveryForm();
            await loadDeliveries();
          } catch (e) {
            console.error("save delivery error:", e);
            setErrorGlobal(
              "Gagal menyimpan surat jalan: " +
                (e.code || e.message || "")
            );
          }
          setSavingDelivery(false);
        }

        function handleDeliveryEdit(dv) {
          setDeliveryId(dv.id);
          setDeliveryClientId(dv.clientId || "");
          setDeliveryTitle(dv.title || "");
          setDeliveryNote(dv.note || "");
        }

        async function handleDeliveryDelete(id) {
          if (!db) return;
          const yakin = confirm("Yakin hapus surat jalan ini?");
          if (!yakin) return;
          setDeletingDeliveryId(id);
          try {
            const ref = doc(db, "surat_jalan", id);
            await deleteDoc(ref);
            await loadDeliveries();
          } catch (e) {
            console.error("delete delivery error:", e);
            setErrorGlobal(
              "Gagal menghapus surat jalan: " +
                (e.code || e.message || "")
            );
          }
          setDeletingDeliveryId(null);
        }

        // PRINT
        function triggerPrint(type, source, docRow) {
          setPrintType(type);
          const client =
            clients.find((c) => c.id === docRow.clientId) || null;
          setPrintDoc({
            ...docRow,
            clientName: docRow.clientName || (client && client.nama) || "",
            clientKontak: client && client.kontak,
            clientTipe: client && client.tipe
          });
          setTimeout(() => {
            window.print();
            setTimeout(() => {
              setPrintType(null);
              setPrintDoc(null);
            }, 300);
          }, 100);
        }

        // ====== UI HELPERS ======
        function navItem(key, label, icon) {
          const active = activePage === key;
          return React.createElement(
            "button",
            {
              type: "button",
              onClick: () => setActivePage(key),
              className:
                "w-full flex items-center gap-3 px-3 py-2 rounded-xl text-sm transition " +
                (active
                  ? "bg-primary-50 text-primary-700 font-medium"
                  : "text-slate-600 hover:bg-slate-100")
            },
            React.createElement(
              "span",
              {
                className:
                  "flex items-center justify-center h-8 w-8 rounded-lg text-xs " +
                  (active ? "bg-primary-100" : "bg-slate-100")
              },
              icon
            ),
            React.createElement("span", null, label)
          );
        }

        const totalClients = clients.length;
        const totalPT = clients.filter((c) => c.tipe === "PT").length;
        const totalCV = clients.filter((c) => c.tipe === "CV").length;
        const latestClients = clients.slice(0, 5);

        // FILTER CLIENTS LIST
        const filteredClients = clients.filter((c) => {
          if (!filterClient.trim()) return true;
          const text =
            (c.nama || "") +
            " " +
            (c.tipe || "") +
            " " +
            (c.kontak || "") +
            " " +
            (c.catatan || "");
          return text.toLowerCase().includes(filterClient.toLowerCase());
        });

        // ===== PAGE CONTENTS =====
        // Dashboard
        const pageDashboard = React.createElement(
          "div",
          { className: "space-y-6" },
          React.createElement(
            "h1",
            { className: "text-2xl font-bold text-slate-900" },
            "Dashboard Overview"
          ),
          React.createElement(
            "div",
            { className: "grid grid-cols-1 md:grid-cols-3 gap-4" },
            // total klien
            React.createElement(
              "div",
              {
                className:
                  "bg-white rounded-2xl border border-slate-100 p-4 shadow-sm"
              },
              React.createElement(
                "div",
                { className: "flex items-center justify-between mb-2" },
                React.createElement(
                  "p",
                  {
                    className:
                      "text-xs uppercase tracking-wide text-slate-500"
                  },
                  "Total Klien"
                ),
                React.createElement(
                  "div",
                  {
                    className:
                      "h-8 w-8 rounded-xl bg-primary-50 flex items-center justify-center text-primary-600 text-sm"
                  },
                  "ðŸ‘¥"
                )
              ),
              React.createElement(
                "p",
                { className: "text-3xl font-semibold" },
                totalClients
              ),
              React.createElement(
                "p",
                { className: "text-xs text-emerald-600 mt-1" },
                totalClients > 0 ? "Aktif" : "Belum ada klien"
              )
            ),
            // PT
            React.createElement(
              "div",
              {
                className:
                  "bg-white rounded-2xl border border-slate-100 p-4 shadow-sm"
              },
              React.createElement(
                "div",
                { className: "flex items-center justify-between mb-2" },
                React.createElement(
                  "p",
                  {
                    className:
                      "text-xs uppercase tracking-wide text-slate-500"
                  },
                  "Badan Usaha PT"
                ),
                React.createElement(
                  "div",
                  {
                    className:
                      "h-8 w-8 rounded-xl bg-violet-50 flex items-center justify-center text-violet-600 text-sm"
                  },
                  "ðŸ¢"
                )
              ),
              React.createElement(
                "p",
                { className: "text-3xl font-semibold" },
                totalPT
              ),
              React.createElement(
                "div",
                { className: "h-1 rounded-full bg-slate-100 overflow-hidden" },
                React.createElement("div", {
                  className: "h-1 bg-violet-400",
                  style: {
                    width:
                      totalClients === 0
                        ? "0%"
                        : Math.min(100, (totalPT / totalClients) * 100) + "%"
                  }
                })
              )
            ),
            // CV
            React.createElement(
              "div",
              {
                className:
                  "bg-white rounded-2xl border border-slate-100 p-4 shadow-sm"
              },
              React.createElement(
                "div",
                { className: "flex items-center justify-between mb-2" },
                React.createElement(
                  "p",
                  {
                    className:
                      "text-xs uppercase tracking-wide text-slate-500"
                  },
                  "Badan Usaha CV"
                ),
                React.createElement(
                  "div",
                  {
                    className:
                      "h-8 w-8 rounded-xl bg-indigo-50 flex items-center justify-center text-indigo-600 text-sm"
                  },
                  "ðŸ“¦"
                )
              ),
              React.createElement(
                "p",
                { className: "text-3xl font-semibold" },
                totalCV
              ),
              React.createElement(
                "div",
                { className: "h-1 rounded-full bg-slate-100 overflow-hidden" },
                React.createElement("div", {
                  className: "h-1 bg-indigo-400",
                  style: {
                    width:
                      totalClients === 0
                        ? "0%"
                        : Math.min(100, (totalCV / totalClients) * 100) + "%"
                  }
                })
              )
            )
          ),
          // tabel klien terbaru
          React.createElement(
            "div",
            {
              className:
                "bg-white rounded-2xl border border-slate-100 shadow-sm"
            },
            React.createElement(
              "div",
              {
                className:
                  "px-4 py-3 border-b border-slate-100 flex items-center justify-between"
              },
              React.createElement(
                "h2",
                { className: "text-sm font-semibold" },
                "Klien Terbaru"
              ),
              React.createElement(
                "button",
                {
                  type: "button",
                  onClick: () => setActivePage("clients"),
                  className:
                    "text-xs px-3 py-1.5 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50"
                },
                "Lihat Semua"
              )
            ),
            React.createElement(
              "div",
              { className: "overflow-x-auto" },
              React.createElement(
                "table",
                { className: "min-w-full text-sm" },
                React.createElement(
                  "thead",
                  { className: "bg-slate-50 text-xs text-slate-500" },
                  React.createElement(
                    "tr",
                    null,
                    React.createElement(
                      "th",
                      { className: "text-left px-4 py-2 font-medium" },
                      "Nama"
                    ),
                    React.createElement(
                      "th",
                      { className: "text-left px-4 py-2 font-medium" },
                      "Tipe"
                    ),
                    React.createElement(
                      "th",
                      { className: "text-left px-4 py-2 font-medium" },
                      "Tanggal"
                    )
                  )
                ),
                React.createElement(
                  "tbody",
                  null,
                  loadingClients
                    ? React.createElement(
                        "tr",
                        null,
                        React.createElement(
                          "td",
                          {
                            colSpan: 3,
                            className:
                              "px-4 py-6 text-center text-slate-500"
                          },
                          "Memuat data..."
                        )
                      )
                    : latestClients.length === 0
                    ? React.createElement(
                        "tr",
                        null,
                        React.createElement(
                          "td",
                          {
                            colSpan: 3,
                            className:
                              "px-4 py-6 text-center text-slate-400"
                          },
                          "Belum ada data klien."
                        )
                      )
                    : latestClients.map((c) =>
                        React.createElement(
                          "tr",
                          {
                            key: c.id,
                            className: "border-t border-slate-100"
                          },
                          React.createElement(
                            "td",
                            { className: "px-4 py-2" },
                            c.nama || "-"
                          ),
                          React.createElement(
                            "td",
                            {
                              className:
                                "px-4 py-2 text-xs text-slate-600"
                            },
                            c.tipe || "-"
                          ),
                          React.createElement(
                            "td",
                            {
                              className:
                                "px-4 py-2 text-xs text-slate-600"
                            },
                            c.createdAt && c.createdAt.toDate
                              ? c.createdAt
                                  .toDate()
                                  .toLocaleDateString("id-ID")
                              : "-"
                          )
                        )
                      )
                )
              )
            )
          )
        );

        // Data Klien
        const pageClients = React.createElement(
          "div",
          { className: "space-y-4" },
          React.createElement(
            "h1",
            { className: "text-2xl font-bold text-slate-900" },
            "Data Klien"
          ),
          React.createElement(
            "div",
            {
              className:
                "grid grid-cols-1 md:grid-cols-2 gap-6 items-start"
            },
            // form
            React.createElement(
              "div",
              {
                className:
                  "bg-white rounded-2xl border border-slate-100 shadow-sm p-5"
              },
              React.createElement(
                "div",
                {
                  className:
                    "flex items-center justify-between mb-3"
                },
                React.createElement(
                  "h2",
                  { className: "text-lg font-semibold" },
                  editingClientId ? "Edit Klien" : "Tambah Klien"
                ),
                editingClientId &&
                  React.createElement(
                    "button",
                    {
                      type: "button",
                      onClick: () => {
                        resetClientForm();
                        setErrorGlobal("");
                      },
                      className:
                        "text-xs px-3 py-1 rounded-full border border-slate-200 text-slate-500 hover:bg-slate-50"
                    },
                    "Batal Edit"
                  )
              ),
              React.createElement(
                "form",
                { className: "space-y-3", onSubmit: handleClientSubmit },
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Nama Klien"
                  ),
                  React.createElement("input", {
                    className:
                      "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                    value: nama,
                    onChange: (e) => setNama(e.target.value),
                    placeholder: "Contoh: PT Maju Mundur Sejahtera"
                  })
                ),
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Tipe Klien"
                  ),
                  React.createElement(
                    "select",
                    {
                      className:
                        "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                      value: tipe,
                      onChange: (e) => setTipe(e.target.value)
                    },
                    React.createElement("option", { value: "PT" }, "PT"),
                    React.createElement("option", { value: "CV" }, "CV"),
                    React.createElement(
                      "option",
                      { value: "Perorangan" },
                      "Perorangan"
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Kontak (opsional)"
                  ),
                  React.createElement("input", {
                    className:
                      "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                    value: kontak,
                    onChange: (e) => setKontak(e.target.value),
                    placeholder: "No HP / email"
                  })
                ),
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Catatan (opsional)"
                  ),
                  React.createElement("textarea", {
                    className:
                      "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                    rows: 3,
                    value: catatan,
                    onChange: (e) => setCatatan(e.target.value),
                    placeholder: "Jenis berkas / keterangan tambahan"
                  })
                ),
                React.createElement(
                  "button",
                  {
                    type: "submit",
                    disabled: savingClient,
                    className:
                      "w-full rounded-lg bg-primary-600 text-white text-sm font-medium px-4 py-2 mt-1 hover:bg-primary-700 disabled:opacity-60"
                  },
                  savingClient
                    ? editingClientId
                      ? "Menyimpan Perubahan..."
                      : "Menyimpan..."
                    : editingClientId
                    ? "Update Klien"
                    : "Simpan Klien"
                )
              )
            ),
            // list
            React.createElement(
              "div",
              {
                className:
                  "bg-white rounded-2xl border border-slate-100 shadow-sm p-5 flex flex-col gap-3"
              },
              React.createElement(
                "div",
                {
                  className:
                    "flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"
                },
                React.createElement(
                  "div",
                  null,
                  React.createElement(
                    "h2",
                    { className: "text-lg font-semibold" },
                    "Daftar Klien"
                  ),
                  React.createElement(
                    "p",
                    { className: "text-xs text-slate-500" },
                    "Klik nama untuk edit, tombol kanan untuk hapus."
                  )
                ),
                React.createElement(
                  "div",
                  { className: "flex gap-2" },
                  React.createElement("input", {
                    className:
                      "flex-1 rounded-lg border border-slate-200 px-3 py-1.5 text-xs focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                    placeholder: "Cari nama / tipe / kontak",
                    value: filterClient,
                    onChange: (e) => setFilterClient(e.target.value)
                  }),
                  React.createElement(
                    "button",
                    {
                      type: "button",
                      onClick: loadClients,
                      className:
                        "text-xs px-3 py-1.5 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 whitespace-nowrap"
                    },
                    "Refresh"
                  )
                )
              ),
              loadingClients
                ? React.createElement(
                    "p",
                    { className: "text-sm text-slate-500" },
                    "Memuat data..."
                  )
                : filteredClients.length === 0
                ? React.createElement(
                    "p",
                    { className: "text-sm text-slate-500" },
                    "Tidak ada data klien."
                  )
                : React.createElement(
                    "ul",
                    { className: "space-y-2 max-h-80 overflow-auto pr-1" },
                    filteredClients.map((c) =>
                      React.createElement(
                        "li",
                        {
                          key: c.id,
                          className:
                            "border border-slate-100 rounded-lg px-3 py-2 text-sm flex justify-between gap-2"
                        },
                        React.createElement(
                          "button",
                          {
                            type: "button",
                            onClick: () => handleClientEdit(c),
                            className:
                              "text-left flex-1 hover:text-primary-700"
                          },
                          React.createElement(
                            "div",
                            {
                              className:
                                "font-medium text-slate-800"
                            },
                            c.nama || "-"
                          ),
                          React.createElement(
                            "div",
                            {
                              className:
                                "text-[11px] text-slate-500"
                            },
                            c.tipe || "-"
                          ),
                          c.kontak &&
                            React.createElement(
                              "div",
                              {
                                className:
                                  "text-[11px] text-slate-500 mt-0.5"
                              },
                              c.kontak
                            ),
                          c.catatan &&
                            React.createElement(
                              "div",
                              {
                                className:
                                  "text-[11px] text-slate-400 mt-0.5"
                              },
                              c.catatan
                            )
                        ),
                        React.createElement(
                          "button",
                          {
                            type: "button",
                            onClick: () => handleClientDelete(c.id),
                            disabled: deletingClientId === c.id,
                            className:
                              "text-[11px] px-2 py-1 rounded-md border border-red-200 text-red-600 hover:bg-red-50 disabled:opacity-60"
                          },
                          deletingClientId === c.id ? "Hapus..." : "Hapus"
                        )
                      )
                    )
                  )
            )
          )
        );

        // Tanda Terima
        const pageTanda = React.createElement(
          "div",
          { className: "space-y-4" },
          React.createElement(
            "h1",
            { className: "text-2xl font-bold text-slate-900" },
            "Tanda Terima Berkas"
          ),
          React.createElement(
            "div",
            {
              className:
                "grid grid-cols-1 md:grid-cols-2 gap-6 items-start"
            },
            // form
            React.createElement(
              "div",
              {
                className:
                  "bg-white rounded-2xl border border-slate-100 shadow-sm p-5"
              },
              React.createElement(
                "h2",
                { className: "text-lg font-semibold mb-3" },
                receiptId ? "Edit Tanda Terima" : "Input Tanda Terima"
              ),
              React.createElement(
                "form",
                { className: "space-y-3", onSubmit: handleReceiptSubmit },
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Klien"
                  ),
                  React.createElement(
                    "select",
                    {
                      className:
                        "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                      value: receiptClientId,
                      onChange: (e) => setReceiptClientId(e.target.value)
                    },
                    React.createElement(
                      "option",
                      { value: "" },
                      "Pilih klien"
                    ),
                    clients.map((c) =>
                      React.createElement(
                        "option",
                        { key: c.id, value: c.id },
                        c.nama || "-"
                      )
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Judul / Uraian Berkas"
                  ),
                  React.createElement("input", {
                    className:
                      "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                    value: receiptTitle,
                    onChange: (e) => setReceiptTitle(e.target.value),
                    placeholder: "Contoh: Berkas legalitas usaha"
                  })
                ),
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Catatan (opsional)"
                  ),
                  React.createElement("textarea", {
                    className:
                      "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                    rows: 3,
                    value: receiptNote,
                    onChange: (e) => setReceiptNote(e.target.value),
                    placeholder: "Keterangan tambahan / nomor referensi internal"
                  })
                ),
                React.createElement(
                  "div",
                  { className: "flex gap-2" },
                  React.createElement(
                    "button",
                    {
                      type: "submit",
                      disabled: savingReceipt,
                      className:
                        "flex-1 rounded-lg bg-primary-600 text-white text-sm font-medium px-4 py-2 hover:bg-primary-700 disabled:opacity-60"
                    },
                    savingReceipt
                      ? receiptId
                        ? "Menyimpan Perubahan..."
                        : "Menyimpan..."
                      : receiptId
                      ? "Update Tanda Terima"
                      : "Simpan Tanda Terima"
                  ),
                  receiptId &&
                    React.createElement(
                      "button",
                      {
                        type: "button",
                        onClick: () => resetReceiptForm(),
                        className:
                          "px-4 py-2 rounded-lg border border-slate-200 text-xs text-slate-600 hover:bg-slate-50"
                      },
                      "Batal"
                    )
                )
              )
            ),
            // list
            React.createElement(
              "div",
              {
                className:
                  "bg-white rounded-2xl border border-slate-100 shadow-sm p-5 flex flex-col gap-3"
              },
              React.createElement(
                "div",
                { className: "flex items-center justify-between mb-1" },
                React.createElement(
                  "h2",
                  { className: "text-lg font-semibold" },
                  "Riwayat Tanda Terima"
                ),
                React.createElement(
                  "button",
                  {
                    type: "button",
                    onClick: loadReceipts,
                    className:
                      "text-xs px-3 py-1.5 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50"
                  },
                  "Refresh"
                )
              ),
              loadingReceipts
                ? React.createElement(
                    "p",
                    { className: "text-sm text-slate-500" },
                    "Memuat data..."
                  )
                : receipts.length === 0
                ? React.createElement(
                    "p",
                    { className: "text-sm text-slate-500" },
                    "Belum ada tanda terima."
                  )
                : React.createElement(
                    "ul",
                    { className: "space-y-2 max-h-80 overflow-auto pr-1" },
                    receipts.map((r) =>
                      React.createElement(
                        "li",
                        {
                          key: r.id,
                          className:
                            "border border-slate-100 rounded-lg px-3 py-2 text-sm flex justify-between gap-2"
                        },
                        React.createElement(
                          "button",
                          {
                            type: "button",
                            onClick: () => handleReceiptEdit(r),
                            className:
                              "text-left flex-1 hover:text-primary-700"
                          },
                          React.createElement(
                            "div",
                            {
                              className:
                                "font-medium text-slate-800"
                            },
                            r.clientName || "-"
                          ),
                          React.createElement(
                            "div",
                            {
                              className:
                                "text-[11px] text-slate-500"
                            },
                            r.title || "-"
                          ),
                          r.note &&
                            React.createElement(
                              "div",
                              {
                                className:
                                  "text-[11px] text-slate-400 mt-0.5"
                              },
                              r.note
                            )
                        ),
                        React.createElement(
                          "div",
                          {
                            className:
                              "flex flex-col items-end gap-1 text-[11px]"
                          },
                          React.createElement(
                            "button",
                            {
                              type: "button",
                              onClick: () =>
                                triggerPrint("tanda", "list", r),
                              className:
                                "px-2 py-1 rounded-md border border-slate-200 text-slate-600 hover:bg-slate-50"
                            },
                            "Print"
                          ),
                          React.createElement(
                            "button",
                            {
                              type: "button",
                              onClick: () => handleReceiptDelete(r.id),
                              disabled: deletingReceiptId === r.id,
                              className:
                                "px-2 py-1 rounded-md border border-red-200 text-red-600 hover:bg-red-50 disabled:opacity-60"
                            },
                            deletingReceiptId === r.id ? "Hapus..." : "Hapus"
                          )
                        )
                      )
                    )
                  )
            )
          )
        );

        // Surat Jalan
        const pageSurat = React.createElement(
          "div",
          { className: "space-y-4" },
          React.createElement(
            "h1",
            { className: "text-2xl font-bold text-slate-900" },
            "Surat Jalan Berkas"
          ),
          React.createElement(
            "div",
            {
              className:
                "grid grid-cols-1 md:grid-cols-2 gap-6 items-start"
            },
            // form
            React.createElement(
              "div",
              {
                className:
                  "bg-white rounded-2xl border border-slate-100 shadow-sm p-5"
              },
              React.createElement(
                "h2",
                { className: "text-lg font-semibold mb-3" },
                deliveryId ? "Edit Surat Jalan" : "Input Surat Jalan"
              ),
              React.createElement(
                "form",
                { className: "space-y-3", onSubmit: handleDeliverySubmit },
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Klien"
                  ),
                  React.createElement(
                    "select",
                    {
                      className:
                        "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                      value: deliveryClientId,
                      onChange: (e) =>
                        setDeliveryClientId(e.target.value)
                    },
                    React.createElement(
                      "option",
                      { value: "" },
                      "Pilih klien"
                    ),
                    clients.map((c) =>
                      React.createElement(
                        "option",
                        { key: c.id, value: c.id },
                        c.nama || "-"
                      )
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Judul / Uraian Pengiriman"
                  ),
                  React.createElement("input", {
                    className:
                      "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                    value: deliveryTitle,
                    onChange: (e) =>
                      setDeliveryTitle(e.target.value),
                    placeholder: "Contoh: Pengiriman berkas legalitas ke klien"
                  })
                ),
                React.createElement(
                  "div",
                  { className: "space-y-1" },
                  React.createElement(
                    "label",
                    { className: "text-sm font-medium text-slate-700" },
                    "Catatan (opsional)"
                  ),
                  React.createElement("textarea", {
                    className:
                      "w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",
                    rows: 3,
                    value: deliveryNote,
                    onChange: (e) =>
                      setDeliveryNote(e.target.value),
                    placeholder: "Keterangan tambahan / nomor referensi"
                  })
                ),
                React.createElement(
                  "div",
                  { className: "flex gap-2" },
                  React.createElement(
                    "button",
                    {
                      type: "submit",
                      disabled: savingDelivery,
                      className:
                        "flex-1 rounded-lg bg-primary-600 text-white text-sm font-medium px-4 py-2 hover:bg-primary-700 disabled:opacity-60"
                    },
                    savingDelivery
                      ? deliveryId
                        ? "Menyimpan Perubahan..."
                        : "Menyimpan..."
                      : deliveryId
                      ? "Update Surat Jalan"
                      : "Simpan Surat Jalan"
                  ),
                  deliveryId &&
                    React.createElement(
                      "button",
                      {
                        type: "button",
                        onClick: () => resetDeliveryForm(),
                        className:
                          "px-4 py-2 rounded-lg border border-slate-200 text-xs text-slate-600 hover:bg-slate-50"
                      },
                      "Batal"
                    )
                )
              )
            ),
            // list
            React.createElement(
              "div",
              {
                className:
                  "bg-white rounded-2xl border border-slate-100 shadow-sm p-5 flex flex-col gap-3"
              },
              React.createElement(
                "div",
                { className: "flex items-center justify-between mb-1" },
                React.createElement(
                  "h2",
                  { className: "text-lg font-semibold" },
                  "Riwayat Surat Jalan"
                ),
                React.createElement(
                  "button",
                  {
                    type: "button",
                    onClick: loadDeliveries,
                    className:
                      "text-xs px-3 py-1.5 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50"
                  },
                  "Refresh"
                )
              ),
              loadingDeliveries
                ? React.createElement(
                    "p",
                    { className: "text-sm text-slate-500" },
                    "Memuat data..."
                  )
                : deliveries.length === 0
                ? React.createElement(
                    "p",
                    { className: "text-sm text-slate-500" },
                    "Belum ada surat jalan."
                  )
                : React.createElement(
                    "ul",
                    { className: "space-y-2 max-h-80 overflow-auto pr-1" },
                    deliveries.map((d) =>
                      React.createElement(
                        "li",
                        {
                          key: d.id,
                          className:
                            "border border-slate-100 rounded-lg px-3 py-2 text-sm flex justify-between gap-2"
                        },
                        React.createElement(
                          "button",
                          {
                            type: "button",
                            onClick: () => handleDeliveryEdit(d),
                            className:
                              "text-left flex-1 hover:text-primary-700"
                          },
                          React.createElement(
                            "div",
                            {
                              className:
                                "font-medium text-slate-800"
                            },
                            d.clientName || "-"
                          ),
                          React.createElement(
                            "div",
                            {
                              className:
                                "text-[11px] text-slate-500"
                            },
                            d.title || "-"
                          ),
                          d.note &&
                            React.createElement(
                              "div",
                              {
                                className:
                                  "text-[11px] text-slate-400 mt-0.5"
                              },
                              d.note
                            )
                        ),
                        React.createElement(
                          "div",
                          {
                            className:
                              "flex flex-col items-end gap-1 text-[11px]"
                          },
                          React.createElement(
                            "button",
                            {
                              type: "button",
                              onClick: () =>
                                triggerPrint("surat", "list", d),
                              className:
                                "px-2 py-1 rounded-md border border-slate-200 text-slate-600 hover:bg-slate-50"
                            },
                            "Print"
                          ),
                          React.createElement(
                            "button",
                            {
                              type: "button",
                              onClick: () =>
                                handleDeliveryDelete(d.id),
                              disabled: deletingDeliveryId === d.id,
                              className:
                                "px-2 py-1 rounded-md border border-red-200 text-red-600 hover:bg-red-50 disabled:opacity-60"
                            },
                            deletingDeliveryId === d.id
                              ? "Hapus..."
                              : "Hapus"
                          )
                        )
                      )
                    )
                  )
            )
          )
        );

        // Settings
        const pageSettings = React.createElement(
          "div",
          { className: "space-y-4" },
          React.createElement(
            "h1",
            { className: "text-2xl font-bold text-slate-900" },
            "Pengaturan"
          ),
          React.createElement(
            "div",
            {
              className:
                "bg-white rounded-2xl border border-slate-100 shadow-sm p-5 max-w-xl"
            },
            React.createElement(
              "p",
              { className: "text-sm text-slate-600" },
              "Area ini bisa dipakai nanti untuk pengaturan nama sistem, logo, atau template cetak."
            ),
            React.createElement(
              "p",
              { className: "mt-4 text-xs text-slate-400" },
              "Versi Sistem: v1.0.0"
            )
          )
        );

        let pageContent = pageDashboard;
        if (activePage === "clients") pageContent = pageClients;
        if (activePage === "tanda") pageContent = pageTanda;
        if (activePage === "surat") pageContent = pageSurat;
        if (activePage === "settings") pageContent = pageSettings;

        // PRINT UI
        let printTitle = "";
        if (printType === "tanda") printTitle = "TANDA TERIMA BERKAS";
        if (printType === "surat") printTitle = "SURAT JALAN BERKAS";

        const printUi =
          printType && printDoc
            ? React.createElement(
                "div",
                {
                  className:
                    "print-only min-h-screen flex justify-center px-4 py-6"
                },
                React.createElement(
                  "div",
                  { className: "w-full max-w-2xl text-slate-900" },
                  React.createElement(
                    "div",
                    { className: "text-center mb-6" },
                    React.createElement(
                      "h1",
                      {
                        className:
                          "text-xl font-bold tracking-wide border-b pb-2 mb-2"
                      },
                      printTitle
                    ),
                    React.createElement(
                      "p",
                      { className: "text-xs" },
                      "Tanggal cetak: ",
                      todayStr
                    )
                  ),
                  React.createElement(
                    "table",
                    { className: "w-full text-sm mb-4" },
                    React.createElement(
                      "tbody",
                      null,
                      React.createElement(
                        "tr",
                        null,
                        React.createElement(
                          "td",
                          { className: "w-32 align-top pb-1" },
                          "Nama Klien"
                        ),
                        React.createElement(
                          "td",
                          { className: "align-top pb-1" },
                          ": ",
                          printDoc.clientName || "-"
                        )
                      ),
                      React.createElement(
                        "tr",
                        null,
                        React.createElement(
                          "td",
                          { className: "align-top pb-1" },
                          "Tipe"
                        ),
                        React.createElement(
                          "td",
                          { className: "align-top pb-1" },
                          ": ",
                          printDoc.clientTipe || "-"
                        )
                      ),
                      React.createElement(
                        "tr",
                        null,
                        React.createElement(
                          "td",
                          { className: "align-top pb-1" },
                          "Kontak"
                        ),
                        React.createElement(
                          "td",
                          { className: "align-top pb-1" },
                          ": ",
                          printDoc.clientKontak || "-"
                        )
                      ),
                      React.createElement(
                        "tr",
                        null,
                        React.createElement(
                          "td",
                          { className: "align-top pb-1" },
                          "Judul"
                        ),
                        React.createElement(
                          "td",
                          { className: "align-top pb-1" },
                          ": ",
                          printDoc.title || "-"
                        )
                      ),
                      React.createElement(
                        "tr",
                        null,
                        React.createElement(
                          "td",
                          { className: "align-top pb-1" },
                          "Catatan"
                        ),
                        React.createElement(
                          "td",
                          { className: "align-top pb-1" },
                          ": ",
                          printDoc.note || "-"
                        )
                      )
                    )
                  ),
                  React.createElement(
                    "p",
                    { className: "text-sm mb-6" },
                    printType === "tanda"
                      ? "Dengan ini kami menyatakan telah menerima berkas dari klien dengan data sebagaimana tercantum di atas untuk diproses lebih lanjut."
                      : "Dengan ini kami menyatakan telah mengirimkan/menyerahkan berkas kepada klien sebagaimana tercantum di atas."
                  ),
                  React.createElement(
                    "div",
                    {
                      className:
                        "flex justify-between text-sm mt-8 pt-8 border-t"
                    },
                    React.createElement(
                      "div",
                      { className: "w-1/2 pr-4" },
                      React.createElement("p", null, "Pihak Klien,"),
                      React.createElement("div", { className: "h-12" }),
                      React.createElement(
                        "p",
                        {
                          className:
                            "border-t border-slate-400 inline-block px-4 pt-1"
                        },
                        printDoc.clientName || "________________"
                      )
                    ),
                    React.createElement(
                      "div",
                      { className: "w-1/2 pl-4 text-right" },
                      React.createElement("p", null, "Petugas,"),
                      React.createElement("div", { className: "h-12" }),
                      React.createElement(
                        "p",
                        {
                          className:
                            "border-t border-slate-400 inline-block px-4 pt-1"
                        },
                        "________________"
                      )
                    )
                  )
                )
              )
            : React.createElement("div", { className: "print-only" });

        const mainUi = React.createElement(
          "div",
          { className: "no-print min-h-screen flex" },
          // sidebar
          React.createElement(
            "aside",
            {
              className:
                "hidden md:flex md:w-64 flex-col border-r border-slate-100 bg-white"
            },
            React.createElement(
              "div",
              {
                className:
                  "px-5 py-4 border-b border-slate-100 flex items-center gap-2"
              },
              React.createElement(
                "div",
                {
                  className:
                    "h-9 w-9 rounded-2xl bg-primary-600 text-white flex items-center justify-center text-lg font-bold"
                },
                "P"
              ),
              React.createElement(
                "div",
                null,
                React.createElement(
                  "p",
                  { className: "text-sm font-semibold" },
                  "ProFile",
                  React.createElement(
                    "span",
                    { className: "text-primary-600" },
                    "Manager"
                  )
                ),
                React.createElement(
                  "p",
                  { className: "text-[11px] text-slate-500" },
                  "Client & Document Control"
                )
              )
            ),
            React.createElement(
              "nav",
              { className: "flex-1 px-3 py-4 space-y-1" },
              navItem("dashboard", "Dashboard", "â–¦"),
              navItem("clients", "Data Klien", "ðŸ‘¤"),
              navItem("tanda", "Tanda Terima", "ðŸ§¾"),
              navItem("surat", "Surat Jalan", "ðŸšš"),
              navItem("settings", "Pengaturan", "âš™ï¸")
            ),
            React.createElement(
              "div",
              {
                className:
                  "px-4 py-4 border-t border-slate-100 text-xs text-slate-400"
              },
              React.createElement("p", null, "Versi Sistem"),
              React.createElement(
                "p",
                { className: "font-medium text-slate-600" },
                "v1.0.0"
              )
            )
          ),
          // main content
          React.createElement(
            "main",
            { className: "flex-1 min-w-0" },
            React.createElement(
              "div",
              { className: "max-w-6xl mx-auto px-4 py-6 space-y-3" },
              errorGlobal &&
                React.createElement(
                  "div",
                  {
                    className:
                      "rounded-lg border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-700"
                  },
                  errorGlobal
                ),
              pageContent
            )
          )
        );

        return React.createElement(
          "div",
          null,
          mainUi,
          printUi
        );
      }

      const rootEl = document.getElementById("root");
      const root = createRoot(rootEl);
      root.render(React.createElement(App));
    </script>
  </body>
</html>
